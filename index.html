<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>21DaysChallenge</title>
    <!-- GoogleFonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Slabo+13px&display=swap"
      rel="stylesheet"
    />

    <meta name="theme-color" content="darkblue" />
    <link rel="icon" href="assets/logo.jpg" />

    <meta
      name="description"
      content="Join our 21-Day Challenge to transform your habits and achieve your goals! Discover daily tasks, motivational tips, and a supportive community to keep you on track. Start your journey to a better you today!"
    />

    <link rel="stylesheet" href="styles.css" />

    <style>
      svg {
        height: 0;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="logoCnt">21DaysChallenge</div>
      <div class="daysCompletedDisplayer">
        <span class="daysCompletedCount">00</span> Days Completed
        <span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
            <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
            <path
              d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"
            />
          </svg>
        </span>
      </div>
    </header>
    <div class="reasonDisplayer">
      <div class="reason"><span>Try:</span> Quit Smoking</div>
      <div class="editButton">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
          <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
          <path
            d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152L0 424c0 48.6 39.4 88 88 88l272 0c48.6 0 88-39.4 88-88l0-112c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 112c0 22.1-17.9 40-40 40L88 464c-22.1 0-40-17.9-40-40l0-272c0-22.1 17.9-40 40-40l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64z"
          />
        </svg>
      </div>
    </div>
    <section>
      <div class="inputDateContainer">
        <input type="date" id="startDateInput" />
        <button id="generateDatesButton">Generate Dates</button>
      </div>
      <div class="container">
        <!-- <div class="box">
          boxes here.............
        </div> -->
      </div>
    </section>
    <footer>
      <div class="clearStorage">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
          <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
          <path
            d="M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6l0 29.1L364.3 320l29.1 0c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"
          />
        </svg>
        <p>Clear All</p>
      </div>
      <div class="trashContainer">
        <div class="trash-icon">
          <div class="bin">
            <div class="lid">
              <div class="handle"></div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script>
      let container = document.querySelector(".container");
      let challengeTotalDays = 21;

      function createBoxElements() {
        for (i = 1; i <= challengeTotalDays; i++) {
          let box = document.createElement("div");
          box.setAttribute("class", "box");
          container.append(box);
        }
      }
      createBoxElements();
    </script>
    <script>
      let allDivs = document.querySelectorAll("*");

      allDivs.forEach((div) => {
        div.classList.add("loadingClass");
      });
    </script>
    <script src="script.js"></script>
    <script>
      // Function to load saved state from localStorage
      function loadSavedState() {
        const savedDate = localStorage.getItem("startDate");
        if (savedDate) {
          document.getElementById("startDateInput").value = savedDate;
          generateDates(savedDate);
        }
      }

      // Function to generate dates based on selected start date
      function generateDates(startDateInput) {
        const startDate = new Date(startDateInput);

        // Initialize day numbers and dates for each box
        for (let i = 0; i < boxes.length; i++) {
          let currentDate = new Date(startDate);
          currentDate.setDate(startDate.getDate() + i);

          // Clear any existing date content in the box
          boxes[i].innerHTML = "";

          // Create and append the date container
          let dateContainer = document.createElement("div");
          dateContainer.setAttribute("class", "dateContainer");
          dateContainer.innerHTML = `
      <span class='boxDate'>${currentDate
        .getDate()
        .toString()
        .padStart(2, "0")} 
      ${currentDate.toLocaleString("default", {
        month: "long",
      })} ${currentDate.getFullYear()}</span>
      <span class="weekday">${currentDate.toLocaleString("default", {
        weekday: "long",
      })}</span>
    `;
          boxes[i].appendChild(dateContainer);

          // Create and append the day count
          let dayCount = document.createElement("div");
          dayCount.setAttribute("class", "dayCount");
          dayCount.innerHTML = `Day <span class='dayCountNumberClass'>${
            i + 1
          }</span>`;
          boxes[i].append(dayCount);
        }
      }

      // Load saved state on page load
      loadSavedState();

      document
        .getElementById("generateDatesButton")
        .addEventListener("click", () => {
          // Get the selected start date
          const startDateInput =
            document.getElementById("startDateInput").value;
          if (!startDateInput) return alert("Please select a start date.");

          // Store the selected start date in localStorage
          localStorage.setItem("startDate", startDateInput);

          // Generate dates based on the selected start date
          generateDates(startDateInput);
        });
    </script>
    <script>
      // Get the current date
      const today = new Date();

      // Format the date to YYYY-MM-DD
      const formattedDate = today.toISOString().split("T")[0];

      // Set the default value of the input field
      document.addEventListener("DOMContentLoaded", () => {
        const startDateInput = document.getElementById("startDateInput");
        startDateInput.value = formattedDate;
        startDateInput.max = formattedDate;
      });
    </script>

    <!-- TCode -->
    <!-- <script>
      currentIndex = 20;
      daysCompletedCount = 20;

      boxes.forEach((box) => {
        box.classList.add("dayCompletedClass");
      });
      boxes[20].classList.remove("dayCompletedClass");
    </script> -->
  </body>
</html>
